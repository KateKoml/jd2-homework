create function get_product_by_name(search character varying)
    returns TABLE(id bigint, product_name character varying, product_category_id integer, product_condition_id integer, price numeric)
    language plpgsql
as
$$
BEGIN
    return query select purchase_offers.id, purchase_offers.product_name, purchase_offers.product_category_id,
                        purchase_offers.product_condition_id, purchase_offers.price
                 from purchase_offers
                 where purchase_offers.product_name ILIKE '%' || search || '%';
END;
$$;

alter function get_product_by_name(varchar) owner to postgres;

